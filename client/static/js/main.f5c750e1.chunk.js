(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{163:function(e,t,a){e.exports=a(291)},168:function(e,t,a){},169:function(e,t,a){},287:function(e,t,a){},288:function(e,t,a){},291:function(e,t,a){"use strict";a.r(t);var s=a(0),r=a.n(s),n=a(11),i=a.n(n),o=(a(168),a(169),a(15)),c=a(16),l=a(18),u=a(17),m=a(25),d=a(19),p=a(14),h=(a(80),a(292)),f=a(53),k=a(12),b=a(20),v=a(4),E=(a(174),a(141)),g=a.n(E).a.create({baseURL:"http://localhost:4000/api/"});g.interceptors.request.use(function(e){var t=localStorage.getItem("authToken");return t&&(e.headers.Authorization=t),e},function(e){return Promise.reject(e)});var O=g,y=function(){return{type:"SET_MESSAGE",payload:arguments.length>0&&void 0!==arguments[0]?arguments[0]:{type:"",message:""}}},j=function(e){return{payload:e,type:"SET_TASKS_DATA"}},_=function(e){return{type:"SHOW_TASK_MODAL",payload:e}},T=function(){return{type:"HIDE_TASK_MODAL"}},w=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).saveTask=a.saveTask.bind(Object(m.a)(a)),a.state={task:e.task},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillReceiveProps",value:function(e){e.task.id!==this.state.task.id&&this.setState({task:e.task})}},{key:"saveTask",value:function(e){e.preventDefault(),this.state.task.id?this.props.updateTask(this.state.task.id,this.state.task):this.props.addTask(this.state.task)}},{key:"updateState",value:function(e){this.setState(Object(v.a)({},this.state,{task:Object(v.a)({},this.state.task,Object(b.a)({},e.target.id,e.target.value))}))}},{key:"render",value:function(){var e=this,t=this.state.task;return r.a.createElement("div",null,r.a.createElement("h4",null),r.a.createElement("hr",null),r.a.createElement("form",{onChange:function(t){return e.updateState(t)},name:"form",onSubmit:function(t){return e.saveTask(t)}},r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-md-12"},r.a.createElement("label",{htmlFor:"title"},"Title"),r.a.createElement("input",{required:!0,value:this.state.task.title,type:"text",className:"form-control",id:"title",placeholder:"Title"})),r.a.createElement("div",{className:"form-group col-md-12"},r.a.createElement("label",{htmlFor:"description"},"Description"),r.a.createElement("textarea",{value:this.state.task.description,name:"description",className:"form-control",id:"description",rows:"6"}))),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",{htmlFor:"status_id"},"Status"),r.a.createElement("select",{required:!0,value:this.state.task.status_id,id:"status_id",name:"status_id",className:"form-control"},Object.keys(this.props.statuses).map(function(t){return r.a.createElement("option",{key:t,value:e.props.statuses[t].id},e.props.statuses[t].name)}))),r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",{htmlFor:"assigned_user_id"},"Assignee"),r.a.createElement("select",{required:!0,onChange:function(t){return e.updateState(t)},value:this.state.task.assigned_user_id,id:"assigned_user_id",name:"assigned_user_id",className:"form-control"},r.a.createElement("option",{value:""},"Select Assignee"),Object.keys(this.props.users).map(function(t){return r.a.createElement("option",{key:t,value:e.props.users[t].id},e.props.users[t].username)}))),r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",{htmlFor:"type_id"},"Type"),r.a.createElement("select",{required:!0,value:this.state.task.type_id,id:"type_id",name:"type_id",className:"form-control"},Object.keys(this.props.types).map(function(t){return r.a.createElement("option",{key:t,value:e.props.types[t].id},e.props.types[t].name)}))),r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",{htmlFor:"task_id"},"Parent"),r.a.createElement("select",{value:this.state.task.task_id,id:"task_id",name:"task_id",className:"form-control"},r.a.createElement("option",{value:"0"}),Object.keys(this.props.tasks).map(function(a){return a==t.id?null:r.a.createElement("option",{key:a,value:e.props.tasks[a].id},e.props.tasks[a].title)}))),r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",{htmlFor:"time_estimate"},"Time Estimate"),r.a.createElement("input",{value:this.state.task.time_estimate,name:"time_estimate",type:"number",className:"form-control",id:"time_estimate"})),r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",{htmlFor:"actual_time"},"Actual Time"),r.a.createElement("input",{value:this.state.task.actual_time,name:"actual_time",type:"number",className:"form-control",id:"actual_time"}))),r.a.createElement("div",{className:"text-right"},r.a.createElement("button",{type:"submit",className:"btn pull-right btn-primary"},"Save"))))}}]),t}(r.a.Component),S=Object(k.b)(function(e,t){var a={title:"",description:"",status_id:e.tasks.statuses[Object.keys(e.tasks.statuses)[0]].id,type_id:e.tasks.types[Object.keys(e.tasks.types)[0]].id,task_id:null,time_estimate:null,actual_time:null,assigned_user_id:null};return t.taskId&&(a=e.tasks.tasks[t.taskId]),{task:a,tasks:e.tasks.tasks,statuses:e.tasks.statuses,types:e.tasks.types,users:e.users.users}},{updateTask:function(e,t){return function(a){O.put("tasks/"+e,t).then(function(s){a(function(){return{type:"UPDATE_TASK_DATA",payload:arguments.length>0&&void 0!==arguments[0]?arguments[0]:{taskId:0,taskData:{}}}}({taskId:e,taskData:t})),a(y({message:"Task saved successfully!",type:"success"})),a({type:"HIDE_TASK_MODAL"})}).catch(function(e){a(y({message:"Task update failed!",type:"error"}))})}},addTask:function(e){return function(t){O.post("tasks/",e).then(function(e){t({type:"ADD_TASK_DATA",payload:e.data}),t(y({message:"Task saved successfully!",type:"success"})),t({type:"HIDE_TASK_MODAL"})}).catch(function(e){t(y({message:"Task save failed!",type:"error"}))})}}})(w),N=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={showModal:!1},a.openTaskModal=a.openTaskModal.bind(Object(m.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"openTaskModal",value:function(){this.props.showTaskModal(this.props.task.id)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"task-parent"},r.a.createElement(f.b,{draggableId:this.props.task.id,index:this.props.index},function(t,a){return r.a.createElement("div",Object.assign({},t.draggableProps,t.dragHandleProps,{ref:t.innerRef,innerRef:t.innerRef}),r.a.createElement(h.a,{onClick:e.openTaskModal},r.a.createElement("strong",null,e.props.task.title)))}))}}]),t}(r.a.Component);var A=Object(k.b)(function(e,t){return{task:e.tasks.tasks[t.taskId]}},{showTaskModal:_})(N),D=function(e){function t(e){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).call(this,e))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"tasks-column"},r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("h1",{style:{textAlign:"center"}},this.props.status.name))),r.a.createElement(f.c,{droppableId:this.props.status.id},function(t,a){return r.a.createElement("div",Object.assign({className:"tasks-container",ref:t.innerRef,innerRef:t.innerRef},t.droppableProps),e.props.taskIds.map(function(e,t){return r.a.createElement(A,{key:t,index:t,taskId:e})}),t.placeholder)}))}}]),t}(r.a.Component);var I=Object(k.b)(function(e,t){return{taskIds:e.tasks.statuses[t.status].tasks,status:e.tasks.statuses[t.status]}})(D),R=a(293),M=function(e){function t(e){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).call(this,e))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(R.a,{visible:this.props.task_modal.isShown,onCancel:this.props.hideTaskModal,footer:null},r.a.createElement(S,{taskId:this.props.task_modal.taskId}))}}]),t}(r.a.Component),x=Object(k.b)(function(e){return{task_modal:e.tasks.task_modal}},{hideTaskModal:T})(M),U=function(e){return{type:"SET_REGISTER_ERRORS",payload:e}},P=function(e){return{type:"SET_LOGIN_ERROR",payload:e}},C=function(){return{type:"SET_AUTH_USER_DATA",payload:arguments.length>0&&void 0!==arguments[0]?arguments[0]:{user:{},token:""}}},F=function(){return{type:"LOGOUT"}},L=function(e){return{type:"SET_USERS",payload:e}},K=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state=e.tasks,a.updateTask=a.updateTask.bind(Object(m.a)(a)),a.showTaskModal=a.showTaskModal.bind(Object(m.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"updateTask",value:function(e){this.props.updateTaskStatus(e)}},{key:"showTaskModal",value:function(){this.props.showTaskModal()}},{key:"componentDidMount",value:function(){this.props.getTasks(),this.props.getUsers()}},{key:"render",value:function(){var e=this,t=this.props.tasks;return r.a.createElement("div",{id:"tasks-panel"},r.a.createElement(p.a,{onClick:this.showTaskModal,className:"addTask",type:"plus-circle"}),r.a.createElement(f.a,{onDragEnd:function(t){return e.updateTask(t)}},r.a.createElement("div",{className:"task-columns-container"},t.status_order.map(function(e){return r.a.createElement(I,{key:e,status:e})}))),r.a.createElement(x,null))}}]),t}(r.a.Component),q=Object(k.b)(function(e){return{tasks:e.tasks}},{getUsers:function(){return function(e){O.get("users/").then(function(t){e(L(t.data))}).catch(function(t){e(y({message:"Users retrieval failed",type:"error"}))})}},showTaskModal:_,updateTaskStatus:function(e){return function(t){if(null!=e.destination){if(e.destination.droppableId===e.source.droppableId&&e.destination.index===e.source.index)return;var a=e.draggableId,s=e.destination.droppableId;O.put("tasks/update_status/"+a,{status_id:s}).then(function(a){t({type:"MOVE_TASK",payload:e}),t(y({message:a.data.message,type:"success"}))}).catch(function(e,a){t(y({message:e.response.data.message,type:"error"}))})}}},getTasks:function(){return function(e){O.get("tasks").then(function(t){e(j(t.data.data))}).catch(function(t){e(y({message:"Error while retrieving tasks, Please try again later",type:"error"}))})}}})(K),G=a(294),W=function(e){function t(e){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).call(this,e))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(){if(console.log(this.props.message.message),""!=this.props.message.message&&"undefined"!=typeof this.props.message.message){var e=this;setTimeout(function(){e.props.removeMessage()},3e3)}}},{key:"render",value:function(){var e=this.props.message.message,t=this.props.message.type;return r.a.createElement("div",{className:"message-container"},e?r.a.createElement(G.a,{message:e,type:t}):"")}}]),t}(r.a.Component);var H=Object(k.b)(function(e,t){return{message:e.general.message}},{removeMessage:function(){return{type:"REMOVE_MESSAGE"}}})(W),V=a(37),X=a(35),B=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"logout",value:function(e){e.preventDefault(),this.props.logout(),this.props.history.push("/")}},{key:"render",value:function(){var e,t=this;return e=this.props.auth.isAuthenticated?r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{onClick:function(e){return t.logout(e)},className:"nav-link",href:"#"},"Logout")):r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"nav-item"},r.a.createElement(X.b,{to:"/login",className:"nav-link"},"Login")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(X.b,{to:"/register",className:"nav-link"},"Register"))),r.a.createElement("div",{id:"sidenav"},r.a.createElement("ul",{className:"nav flex-column"},e))}}]),t}(r.a.Component),J=Object(V.g)(Object(k.b)(function(e){return{auth:{isAuthenticated:e.users.isAuthenticated}}},{logout:F})(B)),z=(a(286),a(98)),$=a.n(z),Q=(a(287),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={email:"",password:""},a.setStateUserData=a.setStateUserData.bind(Object(m.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"setStateUserData",value:function(e){this.setState(Object(v.a)({},this.state,Object(b.a)({},e.target.id,e.target.value)))}},{key:"login",value:function(e){e.preventDefault(),this.props.login(this.state.email,this.state.password)}},{key:"componentWillMount",value:function(){this.props.isAuthenticated&&this.props.history.push("/")}},{key:"componentWillReceiveProps",value:function(e){e.isAuthenticated&&this.props.history.push("/"),e.errors}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"login-form-container"},r.a.createElement("form",{onChange:function(t){return e.setStateUserData(t)},onSubmit:function(t){return e.login(t)}},r.a.createElement("div",{className:"row mx-auto w-25  justify-content-center align-self-center"},r.a.createElement("img",{className:"w-50",src:$.a}),this.props.error?r.a.createElement("div",{className:"text-danger"},"Incorrect email/password"):"",r.a.createElement("div",{className:" form-group form-inline"},r.a.createElement("label",{className:"mr-2",htmlFor:"email"},"Email"),r.a.createElement("input",{required:!0,value:this.state.email,type:"email",id:"email",name:"email",className:"form-control"})),r.a.createElement("div",{className:" form-group  form-inline"},r.a.createElement("label",{className:"mr-2",htmlFor:"password"},"Name"),r.a.createElement("input",{required:!0,value:this.state.password,type:"password",id:"password",name:"password",className:"form-control"})),r.a.createElement("div",{className:"w-100 text-right"},r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Login ")))))}}]),t}(r.a.Component)),Y=Object(k.b)(function(e){return{isAuthenticated:e.users.isAuthenticated,error:e.users.loginError}},{login:function(e,t){return function(a){O.post("users/login",{email:e,password:t}).then(function(e){a(C(e.data))}).catch(function(e){a(P("wrong email/password combination"))})}}})(Q),Z=(a(288),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={username:"",email:"",password:"",confirmPassword:"",photo:null,errors:!1},a.setStateUserData=a.setStateUserData.bind(Object(m.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"setStateUserData",value:function(e){var t=e.target.value;e.target.files&&(t=e.target.files[0]),this.setState(Object(v.a)({},this.state,Object(b.a)({},e.target.id,t)))}},{key:"componentWillReceiveProps",value:function(e){e.isAuthenticated&&this.props.history.push("/"),e.errors&&this.setState({errors:e.errors})}},{key:"register",value:function(e){e.preventDefault(),this.state.password!=this.state.confirmPassword?this.setState(Object(v.a)({},this.state,{errors:Object(v.a)({},this.state.errors,{confirmPassword:"Password dosen't match"})})):this.props.register(this.state)}},{key:"componentWillMount",value:function(){this.props.isAuthenticated&&this.props.history.push("/")}},{key:"componentWillReceiveProps",value:function(e){e.isAuthenticated&&this.props.history.push("/"),e.errors&&this.setState(Object(v.a)({},this.state,{errors:e.errors}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"register-form-container"},r.a.createElement("h1",null,"Register"),r.a.createElement("hr",null),r.a.createElement("form",{onChange:function(t){return e.setStateUserData(t)},onSubmit:function(t){return e.register(t)}},r.a.createElement("div",{className:"row form-group "+(this.state.errors.username?"text-danger":"")},r.a.createElement("div",{className:"col-sm-2"},r.a.createElement("label",{className:"col-form-label",htmlFor:"username"},"Username")),r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("input",{required:!0,value:this.state.username,type:"text",id:"username",name:"username",className:"form-control "+(this.state.errors.username?"is-invalid":"")}),this.state.errors.username?r.a.createElement("div",{className:"invalid-feedback"},this.state.errors.username):"")),r.a.createElement("div",{className:"row form-group "+(this.state.errors.email?"text-danger":"")},r.a.createElement("div",{className:"col-sm-2"},r.a.createElement("label",{className:"col-form-label",htmlFor:"email"},"Email")),r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("input",{required:!0,value:this.state.email,type:"email",id:"email",name:"email",className:"form-control "+(this.state.errors.email?"is-invalid":"")}),this.state.errors.email?r.a.createElement("div",{className:"invalid-feedback"},this.state.errors.email):"")),r.a.createElement("div",{className:"row form-group "+(this.state.errors.password?"text-danger":"")},r.a.createElement("div",{className:"col-sm-2"},r.a.createElement("label",{className:"col-form-label",htmlFor:"password"},"Password")),r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("input",{required:!0,value:this.state.password,type:"password",id:"password",name:"password",className:"form-control "+(this.state.errors.password?"is-invalid":"")}),this.state.errors.password?r.a.createElement("div",{className:"invalid-feedback"},this.state.errors.password):"")),r.a.createElement("div",{className:"row form-group "+(this.state.errors.confirmPassword?"text-danger":"")},r.a.createElement("div",{className:"col-sm-2"},r.a.createElement("label",{className:"col-form-label",htmlFor:"password"},"Confirm Password")),r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("input",{required:!0,value:this.state.confirmPassword,type:"password",id:"confirmPassword",name:"confirmPassword",className:"form-control "+(this.state.errors.confirmPassword?"is-invalid":"")}),this.state.errors.confirmPassword?r.a.createElement("div",{className:"invalid-feedback"},this.state.errors.confirmPassword):"")),r.a.createElement("div",{className:"row form-group "+(this.state.errors.photo?"text-danger":"")},r.a.createElement("div",{className:"col-sm-2"},r.a.createElement("label",{className:"col-form-label",htmlFor:"photo"},"Photo")),r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("input",{type:"file",id:"photo",name:"photo",className:"form-control "+(this.state.errors.photo?"is-invalid":"")}),this.state.errors.photo?r.a.createElement("div",{className:"invalid-feedback"},this.state.errors.photo):"")),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"offset-md-9 col-md-1"},r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Register")))))}}]),t}(r.a.Component)),ee=Object(k.b)(function(e){return{isAuthenticated:e.users.isAuthenticated,errors:e.users.registerErrors}},{register:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{username:"",email:"",password:""};return function(t){var a=new FormData;a.append("username",e.username),a.append("email",e.email),a.append("password",e.password),a.append("photo",e.photo),O.post("users/register",a).then(function(e){t(C(e.data))}).catch(function(e){if(400===e.response.status){var a={};e.response.data.errors.forEach(function(e){a[e.path]=e.message}),t(U(a))}else t(y({meessage:"user creating failed",type:"error"}))})}}})(Z),te=a(23),ae=a(159),se={tasks:{},statuses:{},types:{},status_order:[],task_modal:{isShown:!1,taskId:null}};var re={message:{message:"",type:""}},ne=a(76),ie=a.n(ne),oe={users:{},authUser:{id:"",username:"",email:"",photo:""},registerErrors:{},loginError:"",isAuthenticated:!1},ce=Object(te.c)({tasks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TASKS_DATA":var a={},s={},r=[],n={};return t.payload.task_types.forEach(function(e){n[e.id]=e}),t.payload.task_statuses.forEach(function(e){e.tasks=e.tasks.map(function(e){return s[e.id]=e,e.id}),a[e.id]=e,r.push(e.id)}),Object(v.a)({},e,{tasks:Object(v.a)({},s),statuses:Object(v.a)({},a),status_order:r,types:n});case"MOVE_TASK":var i=function(e,t){var a,s=t.destination,r=t.source,n=t.draggableId;if(s&&(s.droppableId!==r.droppableId||s.index!==r.index)){var i=e.statuses[r.droppableId],o=e.statuses[s.droppableId];if(i===o){var c=Array.from(i.tasks);c.splice(r.index,1),c.splice(s.index,0,n);var l=Object(v.a)({},i,{tasks:c}),u=Object(v.a)({},e,{statuses:Object(v.a)({},e.statuses,Object(b.a)({},l.id,l))});return u}var m=Array.from(i.tasks);m.splice(r.index,1);var d=Object(v.a)({},i,{tasks:m}),p=Array.from(o.tasks);p.splice(s.index,0,n);var h=Object(v.a)({},o,{tasks:p});return Object(v.a)({},e,{statuses:Object(v.a)({},e.statuses,(a={},Object(b.a)(a,d.id,d),Object(b.a)(a,h.id,h),a))})}}(e,t.payload);return i||e;case"SHOW_TASK_MODAL":var o=t.payload;return o||(o=null),Object(v.a)({},e,{task_modal:{isShown:!0,taskId:o}});case"HIDE_TASK_MODAL":return Object(v.a)({},e,{task_modal:{isShown:!1}});case"UPDATE_TASK_DATA":var c=t.payload.taskId,l=t.payload.taskData,u=e.tasks[c].status_id;if(u!==l.status_id){var m,d=e.statuses[u].tasks.indexOf(c),p=e.statuses[u].tasks.slice();p.splice(d,1);var h=e.statuses[l.status_id].tasks.slice();return h.splice(0,0,c),Object(v.a)({},e,{statuses:Object(v.a)({},e.statuses,(m={},Object(b.a)(m,l.status_id,Object(v.a)({},e.statuses[l.status_id],{tasks:h})),Object(b.a)(m,u,Object(v.a)({},e.statuses[u],{tasks:p})),m)),tasks:Object(v.a)({},e.tasks,Object(b.a)({},c,Object(v.a)({},l)))})}return Object(v.a)({},e,{tasks:Object(v.a)({},e.tasks,Object(b.a)({},c,Object(v.a)({},l)))});case"ADD_TASK_DATA":var f=e.statuses[t.payload.status_id].tasks.slice();return f.splice(0,0,t.payload.id),Object(v.a)({},e,{statuses:Object(v.a)({},e.statuses,Object(b.a)({},t.payload.status_id,Object(v.a)({},e.statuses[t.payload.status_id],{tasks:f}))),tasks:Object(v.a)({},e.tasks,Object(b.a)({},t.payload.id,t.payload))});default:return e}},general:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_MESSAGE":return Object(v.a)({},e,{message:Object(v.a)({},e.message,{message:t.payload.message,type:t.payload.type})});case"REMOVE_MESSAGE":return Object(v.a)({},e,{message:{}});default:return e}},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USERS":return Object(v.a)({},e,{users:Object(v.a)({},t.payload)});case"SET_AUTH_USER_DATA":return localStorage.setItem("authToken",t.payload.token),Object(v.a)({},e,{authUser:ie()(t.payload.token),isAuthenticated:!0});case"LOGOUT":return localStorage.removeItem("authToken"),Object(v.a)({},e,{authUser:{},isAuthenticated:!1});case"SET_REGISTER_ERRORS":return Object(v.a)({},e,{registerErrors:t.payload});case"SET_LOGIN_ERROR":return Object(v.a)({},e,{loginError:t.payload});default:return e}}}),le=[ae.a],ue=Object(te.e)(ce,{},Object(te.d)(te.a.apply(void 0,le),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__())),me=a(160),de=Object(k.b)(function(e){return{isAuth:e.users.isAuthenticated}})(function(e){var t=e.component,a=e.isAuth,s=Object(me.a)(e,["component","isAuth"]);return r.a.createElement(V.b,Object.assign({},s,{render:function(e){return!0===a?r.a.createElement(t,e):r.a.createElement(V.a,{to:"/login"})}}))});if(localStorage.authToken&&"undefined"!=localStorage.authToken){var pe=localStorage.authToken,he=ie()(pe);ue.dispatch(C({token:pe}));var fe=Date.now()/1e3;he.exp<fe&&(ue.dispatch({type:"LOGOUT"}),window.location.href="./login")}var ke=function(){return r.a.createElement(k.a,{store:ue},r.a.createElement(X.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(J,null),r.a.createElement("div",{id:"content"},r.a.createElement(H,null),r.a.createElement(V.d,null,r.a.createElement(de,{exact:!0,path:"/",component:q})),r.a.createElement(V.b,{path:"/login",component:Y}),r.a.createElement(V.b,{path:"/register",component:ee})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(ke,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},80:function(e,t,a){},98:function(e,t,a){e.exports=a.p+"static/media/login-user.acdf4802.svg"}},[[163,1,2]]]);
//# sourceMappingURL=main.f5c750e1.chunk.js.map